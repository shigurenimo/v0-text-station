---
paths: "**/*"
---

# Workflow Rules

## 原則

- コードベースが真実。ドキュメントとコードが矛盾したらドキュメントを更新する
- 問題を発見したら CLAUDE.md の `## Issues` に即座に記録する

## Issues に記録する内容

- ライブラリの不具合（バグ、非推奨API）
- 環境依存の問題
- ワークアラウンドと理由
- ユーザーからの指摘

## CLAUDE.md 自動更新

以下の場合に CLAUDE.md を自動更新する：

- 実装で発見した重要なアーキテクチャ制約
- 開発ドリフトを防ぐ制約
- コードベースと文書の乖離

更新時は最小限の変更に留める。

## File Organization

- 1ファイルには1つの関数・クラス・型のみ定義する
- 複数エクスポートは constants.ts, models.ts, types.ts, utils.ts のみ許可
- 不要なファイルは削除する
- index.ts は作成しない

## Development Server

- 開発サーバを起動してから開発を開始する
- 開発中はサーバを起動したままにする
- Webアプリケーションの場合はブラウザで動作確認しながら開発する
- 変更後は必ずブラウザで確認する

## Testing

- 単体テスト可能なロジックには単体テストを書く

## Environment Variables

- `.env.template` に必要な環境変数を記載する
- `.env` が gitignore されていることを確認する
- コード内で環境変数の存在チェックを行い、未設定時はエラーメッセージを表示する
