---
name: check-strategies
description: "このリポジトリの設計パターン・規約集。コードを変更・追加する時に参照し、新しいパターンを発見したら更新する。Use when: UI実装、スタイリング、コンポーネント作成、ルート作成、フック作成、テスト作成など、コードを書く作業全般。"
---

# Check Strategies

設計パターン・規約を参照した開発と、発見したパターンの追記を行う。

## 戦略ファイルの場所

`.claude/strategies/`

## Phase 0: プロジェクト判定

最初にプロジェクトの種類を判定する。

```bash
cat package.json
```

**React + Tailwind CSS プロジェクトの場合:**

dependencies または devDependencies に以下が含まれる場合:
- `react` または `@tanstack/react-router` など React 系
- `tailwindcss`

→ **追加で外部UIガイドラインを読み込む**

```
WebFetch で https://www.ui-skills.com/llms.txt を取得し、そのガイドラインにも従う
```

このガイドラインは:
- コンポーネント設計
- Tailwind CSS のベストプラクティス
- アクセシビリティ
- レスポンシブデザイン

などを含む。戦略ファイルと併用する。

---

## 実装時の動作（自動トリガー）

コードを書く作業では、以下の手順で戦略を確認する。

### Step 1: 関連する戦略ファイルを読む

作業内容に応じて読むファイル:

- ルート作成 → `route.md`
- コンポーネント作成 → `component.md`, `ui-design.md`
- フック作成 → `hook.md`
- 多言語対応 → `i18n.md`
- テスト作成 → `test-pages.md`, `test-pure-components.md`
- 全体把握 → `overview.md`

### Step 2: パターンに従って実装

戦略ファイルのテンプレートや命名規則に従う。

React + Tailwind プロジェクトの場合は、外部ガイドラインも併せて参照。

### Step 3: 新しいパターンを発見したら追記

開発中に以下を発見したら、該当する戦略ファイルを更新する:

- 新しい実装パターン
- 既存パターンの改善
- 新しい命名規則
- 新しい禁止事項

## コマンド呼び出し時の動作（探索モード）

コマンドで明示的に呼び出された場合、コードベースを探索してパターンを収集する。

### 探索対象

- `app/routes/` - ルートパターン
- `app/components/` - コンポーネントパターン
- `app/hooks/` - フックパターン
- `app/lib/`, `app/utils/` - ユーティリティパターン

### 探索の観点

- スペーシング（gap, space-y, padding）
- コンポーネント構造（3層構造、分割基準）
- UIライブラリの使い方（shadcn-ui, Radix UI）
- レイアウトパターン（グリッド、フレックス）
- フォーム構造
- ローディング/エラー状態
- 多言語対応

### 収集したパターンの追記

探索で見つけたパターンを適切な戦略ファイルに追記する。

## 戦略の更新

### 更新の判断基準

- 2回以上使われるパターン → 追加を検討
- 既存パターンと矛盾 → 既存を更新
- プロジェクト固有の制約 → 注意事項に追加

### 更新フォーマット

```markdown
## セクション名

説明文。

```tsx
// コード例
```
```

## 新しい戦略ファイルの作成

既存カテゴリに収まらない場合、新しいファイルを作成する。

- ファイル名: `{category}.md`
- 1ファイル = 1つの開発タスクカテゴリ
- 長すぎる場合は分割（目安: 200行以上）

## 注意事項

- 既存のルールと矛盾する場合はユーザーに確認
- コード例は簡潔に
- 「なぜそうするか」の理由も記録
- 新しいパターンを採用したらすぐに記録
